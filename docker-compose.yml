# docker-compose.yml — Tech Infographic Generator
#
# Services :
#   - backend  : Python FastAPI (analyse LLM + rendu PIL)
#   - frontend : React + Vite (build statique servi par nginx)
#
# Usage :
#   docker compose up --build
#   → Frontend : http://localhost:3000
#   → Backend  : http://localhost:8000

services:
  backend:
    build:
      context: .
      dockerfile: backend/Dockerfile
    ports:
      - "8000:8000"
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
    volumes:
      - ./output:/app/output
    restart: unless-stopped

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3000:80"
    depends_on:
      - backend
    restart: unless-stopped
